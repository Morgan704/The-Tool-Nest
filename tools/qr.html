<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>QR Code Generator — Nest</title>
  <link rel="stylesheet" href="../assets/styles.css"/>
  <style>
    .tool-center{max-width:720px;margin:80px auto;padding:20px}
    .row{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
    canvas{border-radius:8px;background:white}
  </style>
</head>
<body>
  <div class="tool-center tool-wrap" role="main">
    <a href="../index.html">← Home</a>
    <h1>QR Code Generator</h1>
    <p class="kv">Enter text or URL, select size & format, generate and download.</p>

    <div class="row" style="margin-top:12px">
      <label class="kv" for="txt">Text / URL</label>
      <input id="txt" class="input" value="https://example.com" />
      <label class="kv">Size</label>
      <select id="size" class="input" style="width:100px">
        <option value="150">150</option><option value="300" selected>300</option><option value="600">600</option>
      </select>
      <button id="gen" class="btn btn-primary">Generate</button>
      <button id="reset" class="btn btn-secondary">Reset</button>
    </div>

    <div id="preview" style="margin-top:16px" aria-live="polite"></div>
    <div style="margin-top:12px">
      <button id="download" class="btn btn-primary" disabled>Download PNG</button>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/qrious/dist/qrious.min.js"></script>
  <script>
    const txt = document.getElementById('txt');
    const sizeSel = document.getElementById('size');
    const gen = document.getElementById('gen');
    const reset = document.getElementById('reset');
    const preview = document.getElementById('preview');
    const download = document.getElementById('download');
    let qr;

    gen.addEventListener('click', ()=>{
      const v = txt.value.trim(); if(!v){ alert('Enter text or URL'); return; }
      preview.innerHTML = '<canvas id="qrCanvas"></canvas>';
      const canvasEl = document.getElementById('qrCanvas');
      canvasEl.width = canvasEl.height = parseInt(sizeSel.value,10);
      qr = new QRious({element: canvasEl, value: v, size: parseInt(sizeSel.value,10)});
      download.disabled = false;
    });

    download.addEventListener('click', ()=>{
      if(!qr) return;
      const a = document.createElement('a');
      a.href = document.getElementById('qrCanvas').toDataURL('image/png');
      a.download = 'qr.png'; a.click();
    });

    reset.addEventListener('click', ()=>{ txt.value='https://example.com'; preview.innerHTML=''; download.disabled=true; qr=null; });
  </script>
</body>
</html>
