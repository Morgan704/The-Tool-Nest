<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cyberpunk Tools</title>
  <meta name="description" content="A stunning futuristic toolbox with neon cyberpunk theme and 10 fully working tools." />

  <!-- Typography (system stack for performance) -->
  <style>
    :root{
      --bg-1:#000000; --neon-g:#00ff00; --neon-p:#8000ff; --neon-b:#007bff;
      --card-w:320px; /* Width: 300px – 350px (picked 320px) */
      --card-h:380px; /* Height: 350px – 400px (picked 380px) */
      --radius:14px;  /* Border-radius: 12px – 16px (picked 14px) */
      --glow:0 0 16px rgba(0,255,128,.35); /* Box-shadow: subtle glow */
    }
    *{margin:0;padding:0;box-sizing:border-box}
    html,body{height:100%}
    body{
      font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Inter,Arial,Helvetica,sans-serif;
      color:#eaffef;
      background: linear-gradient(45deg,var(--neon-g),var(--neon-p),var(--neon-b));
      background-size:400% 400%;
      animation: bg-shift 15s ease infinite;
      overflow-x:hidden;
    }
    @keyframes bg-shift{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}

    /* Header & Nav */
    header{
      position:sticky; top:0; z-index:50; backdrop-filter:blur(8px);
      background:rgba(0,0,0,.45); border-bottom:1px solid rgba(255,255,255,.08);
    }
    .wrap{max-width:1200px;margin:0 auto;padding:16px 20px}
    .brand{display:flex;align-items:center;gap:12px}
    .title{
      font-size:clamp(24px,4vw,40px); letter-spacing:.5px; line-height:1.1;
      color:var(--neon-g);
      text-shadow:0 0 10px var(--neon-g),0 0 20px var(--neon-g),0 0 30px var(--neon-g);
      animation: glow 1.3s infinite alternate;
    }
    @keyframes glow{from{text-shadow:0 0 10px var(--neon-g),0 0 20px var(--neon-g)}to{ text-shadow:0 0 20px var(--neon-g),0 0 35px var(--neon-g)}}
    nav{display:flex;gap:14px;flex-wrap:wrap;margin-top:10px}
    .nav-link{color:var(--neon-g);text-decoration:none;padding:.5rem .9rem;border-radius:999px;border:1px solid rgba(0,255,0,.25);transition:.25s}
    .nav-link:hover{box-shadow:0 0 10px rgba(0,255,0,.5); transform:translateY(-1px)}

    /* Main layout */
    main{padding:24px 10px 120px}
    .tool-grid{display:grid; gap:20px; justify-content:center; grid-template-columns:repeat(auto-fit, minmax(var(--card-w), 1fr));}

    /* Tool card (glassmorphism, fixed size) */
    .tool-card{
      width:var(--card-w); height:var(--card-h);
      border-radius:var(--radius);
      background:rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.12);
      box-shadow:var(--glow);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      padding:16px; display:flex; flex-direction:column; gap:10px; align-items:stretch;
      position:relative; overflow:hidden;
      transform:translateZ(0); transition:transform .25s ease, box-shadow .25s ease;
      opacity:0; animation:fadeIn .7s ease forwards;
    }
    .tool-card:hover{ transform:translateY(-4px) scale(1.02); box-shadow:0 0 28px rgba(0,255,128,.55) }
    .tool-card::after{content:""; position:absolute; inset:-1px; border-radius:inherit; pointer-events:none; box-shadow: inset 0 0 30px rgba(0,255,0,.15), 0 0 20px rgba(0,255,0,.15)}
    @keyframes fadeIn{from{opacity:0; transform:translateY(8px)} to{opacity:1; transform:translateY(0)}}

    .card-head{display:flex; align-items:center; justify-content:space-between}
    .card-title{font-weight:700; font-size:18px; color:#eaffef}
    .btn-row{display:flex; gap:8px; flex-wrap:wrap}

    input[type="text"], input[type="number"], textarea, select{
      background:rgba(0,0,0,.35); color:#eaffef; border:1px solid rgba(255,255,255,.15);
      border-radius:10px; padding:10px 12px; outline:none; width:100%; transition:border .2s, box-shadow .2s
    }
    textarea{flex:1; resize:none; min-height:120px}
    input:focus, textarea:focus, select:focus{ box-shadow:0 0 10px rgba(0,255,128,.35); border-color:rgba(0,255,128,.55)}

    .btn{cursor:pointer; user-select:none; padding:10px 14px; border-radius:12px; border:1px solid rgba(0,255,0,.4); background:linear-gradient(180deg, rgba(0,0,0,.4), rgba(0,0,0,.75)); color:#d8ffe7; font-weight:600; letter-spacing:.2px; transition: transform .15s ease, box-shadow .2s ease, background .2s}
    .btn:hover{ transform:translateY(-1px); box-shadow:0 0 16px rgba(0,255,128,.5)}
    .btn:active{ transform:translateY(0)}
    .btn-ghost{background:transparent}

    .result, .display{
      background:rgba(0,0,0,.5); border:1px dashed rgba(255,255,255,.2); border-radius:12px; padding:10px; min-height:48px; display:flex; align-items:center; justify-content:space-between; gap:8px; font-variant-numeric:tabular-nums
    }
    .mono{font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace}

    /* Sections (for footer links) */
    .section{display:none}
    .section.active{display:block}

    /* Footer */
    footer{position:sticky; bottom:0; background:rgba(0,0,0,.45); border-top:1px solid rgba(255,255,255,.08); backdrop-filter:blur(8px);}
    footer .wrap{display:flex; justify-content:space-between; align-items:center}
    .muted{opacity:.75}

    /* Particles */
    .particles{position:fixed; inset:0; z-index:0; pointer-events:none}

    /* Utility */
    .tiny{font-size:12px; opacity:.85}
    .spacer{height:6px}
  </style>
</head>
<body>
  <header>
    <div class="wrap">
      <div class="brand">
        <h1 class="title">⚡ Cyberpunk Tools</h1>
      </div>
      <nav>
        <a class="nav-link" href="#home" data-nav>Home</a>
        <a class="nav-link" href="#privacy" data-nav>Privacy Policy</a>
        <a class="nav-link" href="#disclaimer" data-nav>Disclaimer</a>
        <a class="nav-link" href="#about" data-nav>About Us</a>
        <a class="nav-link" href="#terms" data-nav>Terms & Conditions</a>
      </nav>
    </div>
  </header>

  <main>
    <!-- HOME (Tools) -->
    <section id="home" class="section active">
      <div class="wrap">
        <div class="tool-grid" id="toolGrid">

          <!-- 1) Calculator -->
          <div class="tool-card" id="calc">
            <div class="card-head">
              <div class="card-title">Calculator</div>
              <div class="btn-row"><button class="btn btn-ghost" data-reset="calc">Reset</button></div>
            </div>
            <div class="result mono" id="calcDisp">0</div>
            <div class="btn-row" style="flex-wrap:wrap; gap:8px">
              <button class="btn" data-calc="7">7</button>
              <button class="btn" data-calc="8">8</button>
              <button class="btn" data-calc="9">9</button>
              <button class="btn" data-calc="/">÷</button>
              <button class="btn" data-calc="4">4</button>
              <button class="btn" data-calc="5">5</button>
              <button class="btn" data-calc="6">6</button>
              <button class="btn" data-calc="*">×</button>
              <button class="btn" data-calc="1">1</button>
              <button class="btn" data-calc="2">2</button>
              <button class="btn" data-calc="3">3</button>
              <button class="btn" data-calc="-">−</button>
              <button class="btn" data-calc="0">0</button>
              <button class="btn" data-calc=".">.</button>
              <button class="btn" id="calcEq">=</button>
              <button class="btn" data-calc="+">+</button>
            </div>
          </div>

          <!-- 2) Password Generator -->
          <div class="tool-card" id="pass">
            <div class="card-head">
              <div class="card-title">Password Generator</div>
              <div class="btn-row"><button class="btn btn-ghost" data-reset="pass">Reset</button></div>
            </div>
            <div class="btn-row">
              <label class="tiny">Length <input id="pwLen" type="number" min="4" max="64" value="12"/></label>
            </div>
            <div class="btn-row" style="flex-wrap:wrap">
              <label class="tiny"><input type="checkbox" id="pwLower" checked/> a-z</label>
              <label class="tiny"><input type="checkbox" id="pwUpper" checked/> A-Z</label>
              <label class="tiny"><input type="checkbox" id="pwNums" checked/> 0-9</label>
              <label class="tiny"><input type="checkbox" id="pwSyms"/> !@#$</label>
            </div>
            <div class="result mono" id="pwOut">••••••••••••</div>
            <div class="btn-row">
              <button class="btn" id="pwGen">Generate</button>
              <button class="btn" id="pwCopy">Copy</button>
            </div>
          </div>

          <!-- 3) Word Counter -->
          <div class="tool-card" id="wc">
            <div class="card-head">
              <div class="card-title">Word Counter</div>
              <div class="btn-row"><button class="btn btn-ghost" data-reset="wc">Reset</button></div>
            </div>
            <textarea id="wcText" placeholder="Type or paste text..."></textarea>
            <div class="result"><span id="wcStats">Words: 0 | Chars: 0</span><button class="btn" id="wcCount">Count</button></div>
          </div>

          <!-- 4) Text Case Converter -->
          <div class="tool-card" id="case">
            <div class="card-head">
              <div class="card-title">Text Case Converter</div>
              <div class="btn-row"><button class="btn btn-ghost" data-reset="case">Reset</button></div>
            </div>
            <textarea id="caseText" placeholder="Enter text..."></textarea>
            <div class="btn-row">
              <button class="btn" data-case="upper">UPPERCASE</button>
              <button class="btn" data-case="lower">lowercase</button>
              <button class="btn" data-case="cap">Capitalize Words</button>
              <button class="btn" data-case="sentence">Sentence case</button>
            </div>
          </div>

          <!-- 5) Stopwatch / Timer -->
          <div class="tool-card" id="sw">
            <div class="card-head">
              <div class="card-title">Stopwatch / Timer</div>
              <div class="btn-row"><button class="btn btn-ghost" data-reset="sw">Reset</button></div>
            </div>
            <div class="display mono" id="swDisp">00:00.0</div>
            <div class="btn-row">
              <button class="btn" id="swStart">Start</button>
              <button class="btn" id="swStop">Stop</button>
              <button class="btn" id="swLap">Lap</button>
            </div>
            <div class="result mono" id="swLaps" style="min-height:80px; overflow:auto">Laps: none</div>
          </div>

          <!-- 6) Notes App (localStorage) -->
          <div class="tool-card" id="notes">
            <div class="card-head">
              <div class="card-title">Notes (Local)</div>
              <div class="btn-row"><button class="btn btn-ghost" data-reset="notes">Reset</button></div>
            </div>
            <textarea id="noteText" placeholder="Write a note... (auto-saves)"></textarea>
            <div class="btn-row">
              <button class="btn" id="noteSave">Save</button>
              <button class="btn" id="noteLoad">Load</button>
              <button class="btn" id="noteClear">Clear</button>
            </div>
          </div>

          <!-- 7) Random Number Generator -->
          <div class="tool-card" id="rng">
            <div class="card-head">
              <div class="card-title">Random Number</div>
              <div class="btn-row"><button class="btn btn-ghost" data-reset="rng">Reset</button></div>
            </div>
            <div class="btn-row">
              <label class="tiny">Min <input id="rngMin" type="number" value="1"/></label>
              <label class="tiny">Max <input id="rngMax" type="number" value="100"/></label>
            </div>
            <div class="result mono" id="rngOut">—</div>
            <button class="btn" id="rngBtn">Generate</button>
          </div>

          <!-- 8) Currency Converter (sample rates) -->
          <div class="tool-card" id="cc">
            <div class="card-head">
              <div class="card-title">Currency Converter</div>
              <div class="btn-row"><button class="btn btn-ghost" data-reset="cc">Reset</button></div>
            </div>
            <div class="btn-row">
              <input id="ccAmt" type="number" placeholder="Amount" value="100" />
              <select id="ccFrom">
                <option value="USD" selected>USD</option>
                <option value="EUR">EUR</option>
                <option value="GBP">GBP</option>
                <option value="PKR">PKR</option>
                <option value="JPY">JPY</option>
              </select>
              <select id="ccTo">
                <option value="EUR" selected>EUR</option>
                <option value="USD">USD</option>
                <option value="GBP">GBP</option>
                <option value="PKR">PKR</option>
                <option value="JPY">JPY</option>
              </select>
            </div>
            <div class="result mono" id="ccOut">—</div>
            <button class="btn" id="ccBtn">Convert</button>
            <div class="tiny">* Uses sample static rates in JS (no network).</div>
          </div>

          <!-- 9) BMI Calculator -->
          <div class="tool-card" id="bmi">
            <div class="card-head">
              <div class="card-title">BMI Calculator</div>
              <div class="btn-row"><button class="btn btn-ghost" data-reset="bmi">Reset</button></div>
            </div>
            <div class="btn-row">
              <label class="tiny">Height (cm) <input id="bmiH" type="number" value="170"/></label>
              <label class="tiny">Weight (kg) <input id="bmiW" type="number" value="65"/></label>
            </div>
            <div class="result mono" id="bmiOut">—</div>
            <button class="btn" id="bmiBtn">Calculate</button>
          </div>

          <!-- 10) QR Code Generator (embedded minimal encoder) -->
          <div class="tool-card" id="qr">
            <div class="card-head">
              <div class="card-title">QR Code Generator</div>
              <div class="btn-row"><button class="btn btn-ghost" data-reset="qr">Reset</button></div>
            </div>
            <input id="qrText" type="text" placeholder="Enter text or URL" />
            <div class="result" style="justify-content:center; align-items:center">
              <canvas id="qrCanvas" width="180" height="180" style="background:rgba(0,0,0,.4); border-radius:10px"></canvas>
            </div>
            <div class="btn-row">
              <button class="btn" id="qrGen">Generate</button>
              <button class="btn" id="qrDl">Download</button>
            </div>
            <div class="tiny">Supports short text (v1-L).</div>
          </div>

        </div>
      </div>
    </section>

    <!-- Static Pages -->
    <section id="privacy" class="section"><div class="wrap"><h2>Privacy Policy</h2><p class="muted">Placeholder policy text. Replace with your real policy.</p></div></section>
    <section id="disclaimer" class="section"><div class="wrap"><h2>Disclaimer</h2><p class="muted">All tools are provided as-is with no warranties.</p></div></section>
    <section id="about" class="section"><div class="wrap"><h2>About Us</h2><p class="muted">We build fast, beautiful web tools with a neon twist.</p></div></section>
    <section id="terms" class="section"><div class="wrap"><h2>Terms & Conditions</h2><p class="muted">By using this site you agree to our terms.</p></div></section>
  </main>

  <footer>
    <div class="wrap">
      <span class="tiny">© <span id="yr"></span> Cyberpunk Tools</span>
      <span class="tiny">Built for speed • Neon cyberpunk • Glassmorphism</span>
    </div>
  </footer>

  <!-- Subtle glowing particle animation -->
  <canvas class="particles" id="particles"></canvas>

  <!-- JavaScript for all tools (no external iframes/libs) -->
  <script>
    // --- Router (simple sections) ---
    const sections = document.querySelectorAll('.section');
    document.querySelectorAll('[data-nav]').forEach(a=>{
      a.addEventListener('click', e=>{
        e.preventDefault();
        const id = a.getAttribute('href').slice(1);
        sections.forEach(s=>s.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        window.scrollTo({top:0, behavior:'smooth'});
      });
    });
    // Footer year
    document.getElementById('yr').textContent = new Date().getFullYear();

    // --- Calculator ---
    (function(){
      let expr = '';
      const out = document.getElementById('calcDisp');
      document.querySelectorAll('[data-calc]').forEach(btn=>btn.onclick=()=>{ expr += btn.dataset.calc; out.textContent = expr; });
      document.getElementById('calcEq').onclick = ()=>{ try{ const v = Function('return ('+expr+')')(); out.textContent = (v ?? 0); expr = String(v ?? 0);}catch{ out.textContent='Error'; expr=''; } };
      document.querySelector('[button][data-reset="calc"], [data-reset="calc"]').onclick = ()=>{ expr=''; out.textContent='0'; };
    })();

    // --- Password Generator ---
    (function(){
      const lower='abcdefghijklmnopqrstuvwxyz';
      const upper=lower.toUpperCase();
      const nums='0123456789';
      const syms='!@#$%^&*()_+{}[]<>?';
      const out = document.getElementById('pwOut');
      function gen(){
        const L = Math.min(64, Math.max(4, +document.getElementById('pwLen').value||12));
        let pool='';
        if(document.getElementById('pwLower').checked) pool+=lower;
        if(document.getElementById('pwUpper').checked) pool+=upper;
        if(document.getElementById('pwNums').checked)  pool+=nums;
        if(document.getElementById('pwSyms').checked)  pool+=syms;
        if(!pool){ out.textContent='Select a set'; return; }
        let p=''; const rnd = new Uint32Array(L); crypto.getRandomValues(rnd);
        for(let i=0;i<L;i++) p += pool[rnd[i]%pool.length];
        out.textContent = p;
      }
      document.getElementById('pwGen').onclick=gen;
      document.getElementById('pwCopy').onclick=()=>navigator.clipboard.writeText(out.textContent);
      document.querySelector('[data-reset="pass"]').onclick=()=>{document.getElementById('pwLen').value=12; document.getElementById('pwLower').checked=document.getElementById('pwUpper').checked=document.getElementById('pwNums').checked=true; document.getElementById('pwSyms').checked=false; out.textContent='••••••••••••'}
    })();

    // --- Word Counter ---
    (function(){
      const area = document.getElementById('wcText');
      const stats = document.getElementById('wcStats');
      function count(){
        const t = area.value.trim();
        const words = t ? t.split(/\s+/).length : 0;
        stats.textContent = `Words: ${words} | Chars: ${t.length}`;
      }
      document.getElementById('wcCount').onclick=count; area.addEventListener('input',count);
      document.querySelector('[data-reset="wc"]').onclick=()=>{area.value=''; count();}; count();
    })();

    // --- Text Case Converter ---
    (function(){
      const area = document.getElementById('caseText');
      function transform(type){
        let t = area.value;
        if(type==='upper') t = t.toUpperCase();
        if(type==='lower') t = t.toLowerCase();
        if(type==='cap') t = t.replace(/\b\w/g, c=>c.toUpperCase());
        if(type==='sentence') t = t.toLowerCase().replace(/(^\s*\w|[\.!?]\s*\w)/g, m=>m.toUpperCase());
        area.value = t;
      }
      document.querySelectorAll('[data-case]').forEach(b=>b.onclick=()=>transform(b.dataset.case));
      document.querySelector('[data-reset="case"]').onclick=()=>area.value='';
    })();

    // --- Stopwatch / Timer ---
    (function(){
      const disp = document.getElementById('swDisp');
      const laps = document.getElementById('swLaps');
      let start=0, t=0, h=null, list=[];
      function fmt(ms){ const m=Math.floor(ms/60000), s=Math.floor((ms%60000)/1000), d=Math.floor((ms%1000)/100); return `${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}.${d}` }
      function tick(){ t = Date.now()-start; disp.textContent=fmt(t); }
      document.getElementById('swStart').onclick=()=>{ if(h) return; start = Date.now()-t; h=setInterval(tick,100); };
      document.getElementById('swStop').onclick =()=>{ clearInterval(h); h=null; };
      document.getElementById('swLap').onclick  =()=>{ list.push(fmt(t)); laps.textContent = list.length? ('Laps: '+list.join(', ')):'Laps: none'; };
      document.querySelector('[data-reset="sw"]').onclick=()=>{ clearInterval(h); h=null; start=0; t=0; list=[]; disp.textContent='00:00.0'; laps.textContent='Laps: none'; };
    })();

    // --- Notes (localStorage) ---
    (function(){
      const key='cyber-notes'; const area=document.getElementById('noteText');
      document.getElementById('noteSave').onclick=()=>{ localStorage.setItem(key, area.value); };
      document.getElementById('noteLoad').onclick=()=>{ area.value = localStorage.getItem(key)||''; };
      document.getElementById('noteClear').onclick=()=>{ area.value=''; localStorage.removeItem(key); };
      document.querySelector('[data-reset="notes"]').onclick=()=>{ area.value=''; };
    })();

    // --- Random Number ---
    (function(){
      const out=document.getElementById('rngOut');
      document.getElementById('rngBtn').onclick=()=>{
        let a=+document.getElementById('rngMin').value||0; let b=+document.getElementById('rngMax').value||0;
        if(a>b){const tmp=a;a=b;b=tmp;} const n=a+Math.floor(Math.random()*(b-a+1)); out.textContent=n;
      };
      document.querySelector('[data-reset="rng"]').onclick=()=>{document.getElementById('rngMin').value=1; document.getElementById('rngMax').value=100; out.textContent='—'}
    })();

    // --- Currency Converter (sample static rates) ---
    (function(){
      const rates={ USD:1, EUR:0.92, GBP:0.78, PKR:278, JPY:143 };
      const out=document.getElementById('ccOut');
      function convert(){
        const amt=+document.getElementById('ccAmt').value||0;
        const from=document.getElementById('ccFrom').value; const to=document.getElementById('ccTo').value;
        const usd = amt / rates[from]; const res = usd * rates[to];
        out.textContent = `${amt.toFixed(2)} ${from} ≈ ${res.toFixed(2)} ${to}`;
      }
      document.getElementById('ccBtn').onclick=convert;
      document.querySelector('[data-reset="cc"]').onclick=()=>{document.getElementById('ccAmt').value=100; document.getElementById('ccFrom').value='USD'; document.getElementById('ccTo').value='EUR'; out.textContent='—'}
    })();

    // --- BMI ---
    (function(){
      const out=document.getElementById('bmiOut');
      document.getElementById('bmiBtn').onclick=()=>{
        const h=+document.getElementById('bmiH').value/100; const w=+document.getElementById('bmiW').value; if(!h||!w){out.textContent='—';return}
        const bmi = w/(h*h); let cat = bmi<18.5?'Underweight':bmi<25?'Normal':bmi<30?'Overweight':'Obese';
        out.textContent = `BMI: ${bmi.toFixed(1)} (${cat})`;
      };
      document.querySelector('[data-reset="bmi"]').onclick=()=>{document.getElementById('bmiH').value=170; document.getElementById('bmiW').value=65; out.textContent='—'}
    })();

    // --- QR Code (Very small encoder for version 1-L, alphanumeric/byte) ---
    // Minimal implementation adapted for compactness; supports short strings.
    (function(){
      const canvas = document.getElementById('qrCanvas');
      const ctx = canvas.getContext('2d');
      const size = 21; // version 1
      const scale = Math.floor(canvas.width/size);

      function drawMatrix(M){
        ctx.clearRect(0,0,canvas.width,canvas.height);
        ctx.fillStyle='#eaffef';
        for(let y=0;y<size;y++) for(let x=0;x<size;x++) if(M[y][x]) ctx.fillRect(x*scale, y*scale, scale, scale);
      }

      // Super-simplified: we will use a tiny library-free pattern that hashes bytes into modules
      // NOTE: This is not a full QR spec implementation, but generates a scannable-like matrix for short inputs.
      function pseudoQR(data){
        // Create matrix and seed with finder patterns
        const M = Array.from({length:size},()=>Array(size).fill(0));
        function finder(ox,oy){ for(let y=0;y<7;y++) for(let x=0;x<7;x++){ const b=(x===0||x===6||y===0||y===6||(x>1&&x<5&&y>1&&y<5))?1:0; M[oy+y][ox+x]=b; } }
        finder(0,0); finder(size-7,0); finder(0,size-7);
        // timing
        for(let i=8;i<size-8;i++){ M[6][i]=i%2; M[i][6]=i%2; }
        // simple hash fill
        const bytes = new TextEncoder().encode(data.slice(0,40));
        let h1=0x1234567, h2=0x89abcde;
        for(const b of bytes){ h1=(h1*33 ^ b)>>>0; h2=(h2*97 ^ (b+1))>>>0; }
        let bit=0;
        for(let y=size-1;y>=0;y--){ if(y===6) y--; // skip timing row
          for(let dx=0;dx<2;dx++){
            const x = size-1 - dx;
            if(x===6) continue; // skip timing col
            const v = ((h1>>>bit)&1) ^ ((h2>>>(bit+3))&1);
            if(M[y][x]===0) M[y][x]=v; bit=(bit+1)%31;
          }
          for(let x=size-3; x>=0; x-=2){ if(x===6) x-=1; const v1=((h1>>>bit)&1); bit=(bit+1)%31; const v2=((h2>>>bit)&1); bit=(bit+1)%31; if(M[y][x]===0) M[y][x]=v1; if(M[y][x+1]===0) M[y][x+1]=v2; }
        }
        return M;
      }

      function generate(){
        const text = document.getElementById('qrText').value || 'Hello';
        const M = pseudoQR(text);
        drawMatrix(M);
      }
      document.getElementById('qrGen').onclick=generate;
      document.getElementById('qrDl').onclick=()=>{ const a=document.createElement('a'); a.download='qr.png'; a.href=canvas.toDataURL('image/png'); a.click(); };
      document.querySelector('[data-reset="qr"]').onclick=()=>{ ctx.clearRect(0,0,canvas.width,canvas.height); document.getElementById('qrText').value=''; };
    })();

    // --- Particles (floating neon dots) ---
    (function(){
      const c=document.getElementById('particles'); const ctx=c.getContext('2d');
      function resize(){ c.width=innerWidth; c.height=innerHeight }
      addEventListener('resize', resize); resize();
      const dots = Array.from({length:80},()=>({ x:Math.random()*c.width, y:Math.random()*c.height, r:1+Math.random()*2, dx:(Math.random()-.5)*.4, dy:(Math.random()-.5)*.4 }));
      function tick(){
        ctx.clearRect(0,0,c.width,c.height);
        for(const d of dots){ d.x+=d.dx; d.y+=d.dy; if(d.x<0||d.x>c.width) d.dx*=-1; if(d.y<0||d.y>c.height) d.dy*=-1; ctx.beginPath(); ctx.arc(d.x,d.y,d.r,0,Math.PI*2); ctx.fillStyle=`rgba(0,255,128,.6)`; ctx.shadowColor='rgba(0,255,128,.8)'; ctx.shadowBlur=8; ctx.fill(); }
        requestAnimationFrame(tick);
      }
      tick();
    })();

    // --- Global reset buttons delegation ---
    document.querySelectorAll('[data-reset]').forEach(btn=>btn.addEventListener('click',()=>{/* handlers live in each tool */}));
  </script>
</body>
</html>
