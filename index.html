<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- SEO Meta Tags -->
    <title>The Tool Nest - Ultimate Web Tools Collection</title>
    <meta name="description" content="The Tool Nest is your ultimate digital toolbox. A comprehensive collection of free web tools including converters, calculators, PDF tools, image editors, and SEO utilities to enhance your productivity.">
    <meta name="keywords" content="web tools, free tools, online tools, calculator, converter, pdf tools, image editor, seo tools, url shortener, pencil sketch">
    
    <!-- Stylesheets -->
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Exo+2:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    
    <!-- External Libraries (for PDF Merging) -->
    <script src="https://unpkg.com/pdf-lib@1.17.1/dist/pdf-lib.min.js"></script>

    <style>
        :root {
            --neon-green: #39ff14;
            --neon-purple: #bf00ff;
            --neon-blue: #00c3ff;
            --neon-pink: #ff0080;
            --glass-bg: rgba(0, 20, 40, 0.7);
            --glass-border: rgba(255, 255, 255, 0.1);
            --dark-bg: #0a0a0a;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Exo 2', sans-serif;
            background: radial-gradient(ellipse at top, #1a1a2e, #0a0a0a);
            color: #fff;
            min-height: 100vh;
        }

        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        .particle {
            position: absolute;
            width: 2px;
            height: 2px;
            background: var(--neon-blue);
            border-radius: 50%;
            animation: float 20s infinite linear;
        }

        @keyframes float {
            0% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translateY(-100px) rotate(360deg); opacity: 0; }
        }

        .navbar {
            background: rgba(0, 20, 40, 0.9);
            backdrop-filter: blur(15px);
            border-bottom: 1px solid var(--glass-border);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .nav-link {
            color: #fff;
            transition: all 0.3s ease;
            padding: 10px 15px;
            border-radius: 8px;
        }

        .nav-link:hover {
            color: var(--neon-blue);
            background: rgba(0, 195, 255, 0.1);
            text-shadow: 0 0 10px var(--neon-blue);
        }
        
        /* Sign-in Button Style */
        .signin-btn {
             background: linear-gradient(45deg, var(--neon-green), var(--neon-blue));
             color: #000;
             padding: 8px 16px;
             border-radius: 8px;
             font-weight: 700;
             transition: all 0.3s ease;
        }
        .signin-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 0 20px var(--neon-green);
        }

        .hero-section {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            position: relative;
            overflow: hidden;
        }

        .hero-title {
            font-family: 'Orbitron', monospace;
            font-weight: 900;
            font-size: 4rem;
            text-transform: uppercase;
            background: linear-gradient(45deg, var(--neon-blue), var(--neon-purple), var(--neon-green));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: titleGlow 3s ease-in-out infinite alternate;
            text-align: center;
            margin-bottom: 20px;
        }

        .hero-subtitle {
            font-size: 1.5rem;
            color: var(--neon-blue);
            text-align: center;
            margin-bottom: 40px;
            animation: subtitleFade 2s ease-in;
        }

        .hero-description {
            font-size: 1.1rem;
            text-align: center;
            max-width: 800px;
            margin-bottom: 40px;
            color: rgba(255, 255, 255, 0.8);
        }

        @keyframes titleGlow {
            0% { filter: drop-shadow(0 0 10px var(--neon-blue)); transform: scale(1); }
            50% { filter: drop-shadow(0 0 20px var(--neon-purple)); transform: scale(1.02); }
            100% { filter: drop-shadow(0 0 15px var(--neon-green)); transform: scale(1); }
        }

        @keyframes subtitleFade {
            0% { opacity: 0; transform: translateY(20px); }
            100% { opacity: 1; transform: translateY(0); }
        }
        
        .section { padding: 60px 20px; min-height: auto; }

        .section-title {
            font-family: 'Orbitron', monospace;
            font-size: 2.5rem;
            text-align: center;
            margin-bottom: 50px;
            color: var(--neon-blue);
            text-shadow: 0 0 20px var(--neon-blue);
        }

        .category-title {
            font-family: 'Orbitron', monospace;
            font-size: 1.8rem;
            color: var(--neon-green);
            text-shadow: 0 0 15px var(--neon-green);
            margin: 40px 0 20px 0;
            text-align: center;
        }

        .card {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 12px;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(57, 255, 20, 0.1);
            width: 280px;
            height: 320px;
            display: flex;
            flex-direction: column;
        }

        .card:hover {
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 8px 25px rgba(57, 255, 20, 0.2);
            border-color: var(--neon-green);
        }
        
        /* Pro Badge Style */
        .pro-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: linear-gradient(45deg, var(--neon-purple), var(--neon-pink));
            color: white;
            padding: 3px 8px;
            border-radius: 6px;
            font-size: 0.7rem;
            font-weight: 700;
            text-transform: uppercase;
            box-shadow: 0 0 10px var(--neon-pink);
        }
        
        .card-title {
            font-family: 'Orbitron', monospace;
            color: var(--neon-blue);
            text-shadow: 0 0 10px var(--neon-blue);
            font-weight: 700;
        }
        
        /* General Input and Button Styles */
        .neon-input, .neon-textarea, .neon-select {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: #fff;
            transition: all 0.3s ease;
            width: 100%;
            padding: 8px;
            border-radius: 6px;
        }

        .neon-input:focus, .neon-textarea:focus, .neon-select:focus {
            outline: none;
            border-color: var(--neon-blue);
            box-shadow: 0 0 10px rgba(0, 195, 255, 0.3);
        }
        
        .neon-btn {
            background: linear-gradient(45deg, var(--neon-blue), var(--neon-purple));
            border: none;
            color: #000;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            border-radius: 6px;
            padding: 8px 12px;
        }

        .neon-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(0, 195, 255, 0.4);
        }
        
        .reset-btn { background: linear-gradient(45deg, var(--neon-pink), var(--neon-purple)); }
        
        .download-btn {
            background: linear-gradient(45deg, var(--neon-green), #28a745);
            margin-top: auto; /* Push to bottom of flex container */
        }
        
        .output-display {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid var(--neon-green);
            font-family: 'Orbitron', monospace;
            color: var(--neon-green);
            word-break: break-all;
        }

        .tools-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            max-width: 1400px;
            margin: 0 auto;
        }

        .card-content {
            padding: 12px;
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .card-content > *:not(:last-child) { margin-bottom: 8px; }

        .footer {
            background: rgba(0, 20, 40, 0.9);
            backdrop-filter: blur(15px);
            border-top: 1px solid var(--glass-border);
            padding: 40px 20px 20px 20px;
            text-align: center;
        }

        .footer-link {
            color: #fff;
            text-decoration: none;
            transition: all 0.3s ease;
            padding: 8px 16px;
            border-radius: 8px;
        }

        .footer-link:hover {
            color: var(--neon-blue);
            background: rgba(0, 195, 255, 0.1);
            text-shadow: 0 0 10px var(--neon-blue);
        }

        /* Page Content Display Logic */
        .page-content {
            display: none;
            padding: 60px 20px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .page-content.active { display: block; }

        .explore-btn {
            background: linear-gradient(45deg, var(--neon-green), var(--neon-blue));
            color: #000;
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .explore-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 0 25px var(--neon-green);
        }
        
        /* Custom styles for Pro Tools */
        .pro-tool-card { height: 360px; } /* Taller card for Pro tools */
        
        .upload-area {
            border: 2px dashed var(--glass-border);
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            flex-grow: 1;
            padding: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .upload-area:hover {
            border-color: var(--neon-green);
            background: rgba(57, 255, 20, 0.1);
        }
        
        #sketchCanvas {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            margin-top: 10px;
        }

        @media (max-width: 768px) {
            .hero-title { font-size: 2.5rem; }
            .card { width: 90%; max-width: 280px; height: auto; min-height: 300px; }
            .pro-tool-card { height: auto; min-height: 360px; }
        }
    </style>
</head>
<body>
    <div class="particles" id="particles"></div>
    
    <!-- Navigation -->
    <nav class="navbar">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center">
                    <span class="text-xl font-bold text-white cursor-pointer" onclick="showPage('home')">The Tool Nest</span>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-4">
                        <a href="#" onclick="showPage('home')" class="nav-link">Home</a>
                        <a href="#" onclick="showPage('tools')" class="nav-link">Tools</a>
                        <a href="#" onclick="showPage('tutorials')" class="nav-link">Tutorials</a>
                        <a href="#" onclick="showPage('about')" class="nav-link">About Us</a>
                        <a href="#" onclick="showPage('contact')" class="nav-link">Contact Us</a>
                        <div id="auth-container">
                            <button onclick="signIn()" class="signin-btn">Sign In Free</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Home Page -->
    <div id="home" class="page-content active">
        <div class="hero-section">
            <h1 class="hero-title">The Tool Nest</h1>
            <p class="hero-subtitle">Your Ultimate Digital Toolbox</p>
            <p class="hero-description">
                Discover a comprehensive collection of powerful web tools designed to enhance your productivity. 
                From calculators and converters to Pro-level PDF and Image tools, we've got everything 
                you need in one convenient location.
            </p>
            <button onclick="showPage('tools')" class="explore-btn">
                Explore Tools
            </button>
        </div>
    </div>
    
    <!-- Sign In Required Page -->
    <div id="signin-required" class="page-content">
        <div class="text-center py-20">
            <h2 class="section-title">Access Denied</h2>
            <p class="hero-description mb-8">Please sign in to access our full suite of powerful tools.</p>
            <button onclick="signIn()" class="explore-btn">Sign In Free</button>
        </div>
    </div>

    <!-- Tools Page -->
    <div id="tools" class="page-content">
        <div class="section">
            <h2 class="section-title">Our Tool Collection</h2>
            
            <!-- Pro Tools Section -->
            <h3 class="category-title">✨ Pro Tools</h3>
            <div class="tools-container">
                <!-- Picture to Pencil Sketch Tool -->
                <div class="card pro-tool-card">
                    <div class="pro-badge">Pro</div>
                    <div class="card-content">
                        <h3 class="card-title text-lg text-center"><i class="fas fa-pencil-ruler mr-2"></i>Pencil Sketch</h3>
                        <input type="file" id="sketchUpload" accept="image/*" class="hidden">
                        <div id="sketchUploadArea" class="upload-area">
                            <i class="fas fa-cloud-upload-alt text-3xl mb-2 text-gray-400"></i>
                            <p class="text-xs">Click to upload image</p>
                        </div>
                        <canvas id="sketchCanvas" class="hidden"></canvas>
                        <p id="sketchStatus" class="text-xs text-center text-gray-400 mt-2">Upload an image to start.</p>
                        <button id="downloadSketchBtn" onclick="downloadSketch()" class="neon-btn download-btn hidden">
                            <i class="fas fa-download mr-2"></i>Download Sketch
                        </button>
                    </div>
                </div>

                <!-- URL Shortener Tool -->
                <div class="card pro-tool-card">
                    <div class="pro-badge">Pro</div>
                    <div class="card-content">
                        <h3 class="card-title text-lg text-center"><i class="fas fa-link mr-2"></i>URL Shortener</h3>
                        <label for="urlInput" class="sr-only">Long URL</label>
                        <textarea id="urlInput" placeholder="Enter your long URL here..." rows="4" class="neon-textarea text-xs"></textarea>
                        <button onclick="shortenUrl()" class="neon-btn mt-2">Shorten URL</button>
                        <div id="urlOutput" class="output-display p-2 mt-2 rounded text-xs flex-1 overflow-auto"></div>
                        <button id="copyUrlBtn" onclick="copyUrl()" class="neon-btn download-btn hidden">
                            <i class="fas fa-copy mr-2"></i>Copy Link
                        </button>
                    </div>
                </div>

                <!-- PDF to Word Converter -->
                <div class="card pro-tool-card">
                    <div class="pro-badge">Pro</div>
                    <div class="card-content">
                        <h3 class="card-title text-lg text-center"><i class="fas fa-file-word mr-2"></i>PDF to Word</h3>
                        <input type="file" id="pdfToWordUpload" class="hidden" accept=".pdf">
                        <div id="pdfToWordUploadArea" class="upload-area">
                             <i class="fas fa-file-pdf text-3xl mb-2 text-gray-400"></i>
                            <p class="text-xs">Click to upload PDF</p>
                        </div>
                        <p id="pdfToWordStatus" class="text-xs text-center text-gray-400 mt-2">Upload a PDF to convert.</p>
                        <button onclick="serverRequiredNotice()" class="neon-btn download-btn mt-2">
                             <i class="fas fa-download mr-2"></i>Download Word Doc
                        </button>
                    </div>
                </div>

                <!-- Merge PDF Files -->
                <div class="card pro-tool-card">
                    <div class="pro-badge">Pro</div>
                    <div class="card-content">
                        <h3 class="card-title text-lg text-center"><i class="fas fa-compress-arrows-alt mr-2"></i>Merge PDFs</h3>
                        <input type="file" id="mergePdfUpload" class="hidden" accept=".pdf" multiple>
                        <div id="mergePdfUploadArea" class="upload-area">
                             <i class="fas fa-object-group text-3xl mb-2 text-gray-400"></i>
                            <p class="text-xs">Click to upload PDFs (2+)</p>
                        </div>
                        <p id="mergePdfStatus" class="text-xs text-center text-gray-400 mt-2">Upload at least two PDFs.</p>
                        <button id="downloadMergedPdfBtn" onclick="mergePdfs()" class="neon-btn download-btn hidden">
                             <i class="fas fa-download mr-2"></i>Download Merged PDF
                        </button>
                    </div>
                </div>

                <!-- Compress PDF -->
                <div class="card pro-tool-card">
                    <div class="pro-badge">Pro</div>
                    <div class="card-content">
                        <h3 class="card-title text-lg text-center"><i class="fas fa-file-archive mr-2"></i>Compress PDF</h3>
                        <input type="file" id="compressPdfUpload" class="hidden" accept=".pdf">
                        <div id="compressPdfUploadArea" class="upload-area">
                             <i class="fas fa-file-zipper text-3xl mb-2 text-gray-400"></i>
                            <p class="text-xs">Click to upload PDF</p>
                        </div>
                        <p id="compressPdfStatus" class="text-xs text-center text-gray-400 mt-2">Upload a PDF to compress.</p>
                        <button onclick="serverRequiredNotice()" class="neon-btn download-btn mt-2">
                             <i class="fas fa-download mr-2"></i>Download Compressed
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Existing Tools Section... -->
            <h3 class="category-title">📊 Calculator Tools</h3>
            <div class="tools-container">
                 <!-- Calculator card -->
                <div class="card">
                    <div class="card-content">
                        <h3 class="card-title text-lg text-center"><i class="fas fa-calculator mr-2"></i>Calculator</h3>
                        <!-- ... (calculator implementation from original code) ... -->
                    </div>
                </div>
                 <!-- Other original calculator cards go here -->
            </div>

            <h3 class="category-title">🔄 Converter Tools</h3>
            <div class="tools-container">
                <!-- Original converter cards go here -->
            </div>
            
             <h3 class="category-title">🎲 Generator Tools</h3>
            <div class="tools-container">
                <!-- Original generator cards go here -->
            </div>

        </div>
    </div>
    
    <!-- Tutorials Page -->
    <div id="tutorials" class="page-content">
        <div class="max-w-4xl mx-auto">
            <h2 class="section-title">Tool Tutorials</h2>
            <div class="space-y-8 text-gray-300">
                <div>
                    <h3 class="text-2xl font-semibold text-blue-400 mb-3">How to Use the Pencil Sketch Tool</h3>
                    <ol class="list-decimal list-inside space-y-2">
                        <li>Navigate to the "Tools" page after signing in.</li>
                        <li>Find the "Pencil Sketch" tool in the Pro Tools section.</li>
                        <li>Click on the upload area to select an image file (JPG, PNG, etc.) from your device.</li>
                        <li>The tool will automatically process the image and display a preview of the sketch.</li>
                        <li>Once you're happy with the result, click the "Download Sketch" button to save it as a PNG file.</li>
                    </ol>
                </div>
                 <div>
                    <h3 class="text-2xl font-semibold text-blue-400 mb-3">How to Merge PDF Files</h3>
                    <ol class="list-decimal list-inside space-y-2">
                        <li>Go to the "Tools" page and locate the "Merge PDFs" tool.</li>
                        <li>Click the upload area to open your file browser. Select two or more PDF files you wish to combine.</li>
                        <li>The tool will show you how many files you have selected.</li>
                        <li>Click the "Download Merged PDF" button. This will process and combine the files in your browser.</li>
                        <li>Your browser will then prompt you to save the newly created single PDF file.</li>
                    </ol>
                </div>
            </div>
        </div>
    </div>

    <!-- About Us Page (from original code) -->
    <div id="about" class="page-content">
        <!-- ... (content from original code) ... -->
    </div>
    
    <!-- Contact & Suggestion Page -->
    <div id="contact" class="page-content">
         <div class="max-w-4xl mx-auto">
            <h2 class="section-title">Contact & Feedback</h2>
            <div class="grid md:grid-cols-2 gap-12">
                <!-- Contact Form -->
                <div>
                    <h3 class="text-2xl font-semibold text-blue-400 mb-4">Contact Us</h3>
                    <form id="contactForm" class="space-y-4">
                        <div>
                            <label for="contactName" class="block mb-1 text-sm">Name</label>
                            <input type="text" id="contactName" class="neon-input" required>
                        </div>
                         <div>
                            <label for="contactEmail" class="block mb-1 text-sm">Email</label>
                            <input type="email" id="contactEmail" class="neon-input" required>
                        </div>
                         <div>
                            <label for="contactMessage" class="block mb-1 text-sm">Message</label>
                            <textarea id="contactMessage" rows="5" class="neon-textarea" required></textarea>
                        </div>
                        <button type="submit" class="neon-btn w-full">Send Message</button>
                    </form>
                </div>
                <!-- Suggestion Form -->
                <div>
                    <h3 class="text-2xl font-semibold text-green-400 mb-4">Suggest a Tool</h3>
                    <form id="suggestionForm" class="space-y-4">
                         <div>
                            <label for="suggestionTool" class="block mb-1 text-sm">Tool Idea</label>
                            <input type="text" id="suggestionTool" class="neon-input" placeholder="e.g., Image Background Remover" required>
                        </div>
                         <div>
                            <label for="suggestionDetails" class="block mb-1 text-sm">Details</label>
                            <textarea id="suggestionDetails" rows="5" class="neon-textarea" placeholder="Describe how the tool should work..." required></textarea>
                        </div>
                        <button type="submit" class="neon-btn w-full">Submit Suggestion</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-links">
            <a href="#" onclick="showPage('home')" class="footer-link">Home</a>
            <a href="#" onclick="showPage('tools')" class="footer-link">Tools</a>
            <a href="#" onclick="showPage('tutorials')" class="footer-link">Tutorials</a>
            <a href="#" onclick="showPage('about')" class="footer-link">About Us</a>
            <a href="#" onclick="showPage('contact')" class="footer-link">Contact Us</a>
        </div>
        <!-- Social Icons... -->
        <div class="text-gray-400 text-sm">
            <p>&copy; 2024 The Tool Nest. All rights reserved.</p>
        </div>
    </footer>

    <script>
    // --- AUTHENTICATION ---
    let isSignedIn = localStorage.getItem('toolNestSignedIn') === 'true';

    function updateAuthUI() {
        const authContainer = document.getElementById('auth-container');
        if (isSignedIn) {
            authContainer.innerHTML = `<button onclick="signOut()" class="nav-link">Sign Out</button>`;
        } else {
            authContainer.innerHTML = `<button onclick="signIn()" class="signin-btn">Sign In Free</button>`;
        }
    }

    function signIn() {
        isSignedIn = true;
        localStorage.setItem('toolNestSignedIn', 'true');
        updateAuthUI();
        showPage('tools'); // Redirect to tools after signing in
    }

    function signOut() {
        isSignedIn = false;
        localStorage.removeItem('toolNestSignedIn');
        updateAuthUI();
        showPage('home'); // Redirect to home after signing out
    }

    // --- NAVIGATION ---
    function showPage(pageId) {
        if (pageId === 'tools' && !isSignedIn) {
            pageId = 'signin-required';
        }
        
        document.querySelectorAll('.page-content').forEach(page => page.classList.remove('active'));
        document.getElementById(pageId).classList.add('active');
        window.scrollTo(0, 0);
    }

    // --- PARTICLE ANIMATION ---
    // (from original code)
    
    // --- PRO-LEVEL TOOLS ---

    // 1. Pencil Sketch Tool
    const sketchUploadInput = document.getElementById('sketchUpload');
    const sketchUploadArea = document.getElementById('sketchUploadArea');
    const sketchCanvas = document.getElementById('sketchCanvas');
    const sketchCtx = sketchCanvas.getContext('2d');
    const sketchStatus = document.getElementById('sketchStatus');
    const downloadSketchBtn = document.getElementById('downloadSketchBtn');

    sketchUploadArea.addEventListener('click', () => sketchUploadInput.click());
    sketchUploadInput.addEventListener('change', handleImageUpload);

    function handleImageUpload(event) {
        const file = event.target.files[0];
        if (file && file.type.startsWith('image/')) {
            const reader = new FileReader();
            reader.onload = function(e) {
                const img = new Image();
                img.onload = function() {
                    applySketchEffect(img);
                };
                img.src = e.target.result;
            };
            reader.readAsDataURL(file);
            sketchStatus.textContent = 'Processing...';
            sketchUploadArea.classList.add('hidden');
        } else {
             sketchStatus.textContent = 'Please upload a valid image file.';
        }
    }

    function applySketchEffect(img) {
        sketchCanvas.width = img.width;
        sketchCanvas.height = img.height;

        // 1. Grayscale
        sketchCtx.filter = 'grayscale(1)';
        sketchCtx.drawImage(img, 0, 0);

        // 2. Invert
        sketchCtx.globalCompositeOperation = 'difference';
        sketchCtx.fillStyle = 'white';
        sketchCtx.fillRect(0, 0, sketchCanvas.width, sketchCanvas.height);
        
        // 3. Blur
        sketchCtx.filter = 'blur(5px)';
        sketchCtx.globalCompositeOperation = 'color-dodge';
        sketchCtx.drawImage(sketchCanvas, 0, 0);

        // Reset filters for next draw
        sketchCtx.filter = 'none';
        sketchCtx.globalCompositeOperation = 'source-over';
        
        sketchCanvas.classList.remove('hidden');
        downloadSketchBtn.classList.remove('hidden');
        sketchStatus.textContent = 'Sketch generated successfully!';
    }

    function downloadSketch() {
        const link = document.createElement('a');
        link.download = 'sketch.png';
        link.href = sketchCanvas.toDataURL('image/png');
        link.click();
    }
    
    // 2. URL Shortener (Mockup)
    function shortenUrl() {
        const longUrl = document.getElementById('urlInput').value;
        const urlOutput = document.getElementById('urlOutput');
        const copyBtn = document.getElementById('copyUrlBtn');

        if (!longUrl.trim()) {
            urlOutput.textContent = 'Please enter a URL.';
            copyBtn.classList.add('hidden');
            return;
        }
        
        // Server-side logic simulation
        urlOutput.textContent = 'Generating... (This is a demo)';
        setTimeout(() => {
            const shortCode = Math.random().toString(36).substring(2, 8);
            const shortUrl = `https://tn.est/${shortCode}`;
            urlOutput.textContent = shortUrl;
            copyBtn.classList.remove('hidden');
            serverRequiredNotice('A real URL shortener requires a backend server to store links.');
        }, 1000);
    }

    function copyUrl() {
        const urlText = document.getElementById('urlOutput').textContent;
        navigator.clipboard.writeText(urlText).then(() => {
            const btn = document.getElementById('copyUrlBtn');
            const originalText = btn.innerHTML;
            btn.innerHTML = `<i class="fas fa-check mr-2"></i>Copied!`;
            setTimeout(() => {
                btn.innerHTML = originalText;
            }, 2000);
        });
    }

    // 3 & 5. PDF to Word / Compress PDF (Mockup)
    document.getElementById('pdfToWordUploadArea').addEventListener('click', () => document.getElementById('pdfToWordUpload').click());
    document.getElementById('compressPdfUploadArea').addEventListener('click', () => document.getElementById('compressPdfUpload').click());
    
    function serverRequiredNotice(message = 'This pro-level tool requires complex server-side processing and cannot be run solely in the browser.') {
        alert(`Server Notice: ${message}`);
    }

    // 4. PDF Merger
    const mergePdfUploadInput = document.getElementById('mergePdfUpload');
    const mergePdfUploadArea = document.getElementById('mergePdfUploadArea');
    const mergePdfStatus = document.getElementById('mergePdfStatus');
    const downloadMergedPdfBtn = document.getElementById('downloadMergedPdfBtn');
    let pdfFilesToMerge = [];

    mergePdfUploadArea.addEventListener('click', () => mergePdfUploadInput.click());
    mergePdfUploadInput.addEventListener('change', (e) => {
        pdfFilesToMerge = Array.from(e.target.files);
        if (pdfFilesToMerge.length > 1) {
            mergePdfStatus.textContent = `${pdfFilesToMerge.length} files selected. Ready to merge.`;
            downloadMergedPdfBtn.classList.remove('hidden');
        } else {
            mergePdfStatus.textContent = 'Please select at least two PDF files.';
            downloadMergedPdfBtn.classList.add('hidden');
        }
    });

    async function mergePdfs() {
        if (pdfFilesToMerge.length < 2) return;
        
        mergePdfStatus.textContent = 'Merging PDFs... Please wait.';
        downloadMergedPdfBtn.disabled = true;

        const { PDFDocument } = PDFLib;
        const mergedPdf = await PDFDocument.create();

        for (const file of pdfFilesToMerge) {
            const arrayBuffer = await file.arrayBuffer();
            const pdf = await PDFDocument.load(arrayBuffer);
            const copiedPages = await mergedPdf.copyPages(pdf, pdf.getPageIndices());
            copiedPages.forEach(page => mergedPdf.addPage(page));
        }

        const mergedPdfBytes = await mergedPdf.save();
        
        const blob = new Blob([mergedPdfBytes], { type: 'application/pdf' });
        const link = document.createElement('a');
        link.href = URL.createObjectURL(blob);
        link.download = 'merged.pdf';
        link.click();
        
        URL.revokeObjectURL(link.href);
        mergePdfStatus.textContent = 'Merge complete! Check your downloads.';
        downloadMergedPdfBtn.disabled = false;
    }

    // --- FORMS ---
    document.getElementById('contactForm').addEventListener('submit', function(e) {
        e.preventDefault();
        alert('Thank you for your message! (This is a demo, no email was sent).');
        this.reset();
    });
    
    document.getElementById('suggestionForm').addEventListener('submit', function(e) {
        e.preventDefault();
        alert('Thank you for your suggestion! We appreciate your feedback. (This is a demo).');
        this.reset();
    });

    // --- INITIALIZATION ---
    document.addEventListener('DOMContentLoaded', () => {
        // ... (original DOMContentLoaded functions like note loading)
        updateAuthUI();
        showPage('home'); // Start on the home page
    });

    // --- Add original tool scripts below ---
    // (e.g., calculator, converters, etc.)
    
    </script>
</body>
</html>
